<!DOCTYPE html>
<html>
	<head>
		<title>Simple Prediction</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

		<!-- jQuery library -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<!-- Popper JS -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

		<!-- Latest compiled JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

		<script src="https://unpkg.com/brain.js"></script>
	</head>
	<body>
		<div class="container-fluid">
			<div class="row">
				<div class="col-12 d-flex justify-content-center">
					<h1>Simple Prediction</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-12 d-flex justify-content-center">
					<p>Check boxes and press 'Submit'</p>
				</div>
			</div>
			<div class="row">
				<div class="col-4">
					
				</div>
				<div class="col-4">
					<!-- -->
					<div id="checkboxeswrapper"></div>
					<!-- -->
				</div>
				<div class="col-4">
					
				</div>
			</div>
			<div class="row">
				<div class="col-4">
					
				</div>
				<div class="col-4 d-flex justify-content-center">
					<!-- -->
					<div id="buttonswrapper"></div>
					<!-- -->
				</div>
				<div class="col-4">
					
				</div>
			</div>
			<div class="row">
				<div class="col-12">
				<p></p>
				</div>
			</div>

			<div class="row">
				<div class="col-12">
					<div id="wrapper">
				
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<!-- -->
					<div id="usertablewrapper"></div>
					<!-- -->
				</div>
				<div class="col">
					<!-- -->
					<div id="predicttablewrapper"></div>
					<!-- -->
					<table id="predicttable" class="table table-warning table-striped">
						<thead>
						  <tr>
							<th>Prediction 1</th>
							<th>Prediction 2</th>
							<th>Prediction 3</th>
						  </tr>
						</thead>
						<tbody id="predicttbody">
						  <tr>
							<td>-</td>
							<td>-</td>
							<td>-</td>
						  </tr>
						  <tr>
							<td>-</td>
							<td>-</td>
							<td>-</td>
						  </tr>
						  <tr>
							<td>-</td>
							<td>-</td>
							<td>-</td>
						  </tr>
						</tbody>
					</table>
				</div>
			</div>
  
		</div>
		
		<script>
		//buttons
		$('#buttonswrapper').append($('<button/>', {
			id: 'btnSubmit',
			type: 'button',
			'class': 'btn btn-primary',
			text: 'Submit',
			click: function() {
			// onclick
			},
		}));
		//checkboxes
		$('#checkboxeswrapper').append($('<div/>', {
			'class': 'input-group mb-3 d-flex justify-content-center',
			append: $('<div/>', {
                id: 'checkboxesgroup',
                class: 'input-group-prepend',
            }), // end checkboxesgroup
		}));
		$('#checkboxesgroup').append($('<div/>', {
			'class': 'input-group-text',
			append: $('<input/>', {
                id: 'chk1',
				type: 'checkbox',
				click: function() {
					// onclick
				},
            }), // end chk1
		}));
		$('#checkboxesgroup').append($('<div/>', {
			'class': 'input-group-text',
			append: $('<input/>', {
                id: 'chk2',
				type: 'checkbox',
				click: function() {
					// onclick
				},
            }), // end chk2
		}));
		$('#checkboxesgroup').append($('<div/>', {
			'class': 'input-group-text',
			append: $('<input/>', {
                id: 'chk3',
				type: 'checkbox',
				click: function() {
					// onclick
				},
            }), // end chk3
		}));
		//tables
		/*
				<table id="usertable" class="table table-dark table-striped">
						<thead>
						  <tr>
							<th>User Check 1</th>
							<th>User Check 2</th>
							<th>User Check 3</th>
						  </tr>
						</thead>
						<tbody id="userbody">
						  <tr>
							<td>1</td>
							<td>0</td>
							<td>0</td>
						  </tr>
						  <tr>
							<td>0</td>
							<td>1</td>
							<td>0</td>
						  </tr>
						  <tr>
							<td>0</td>
							<td>0</td>
							<td>1</td>
						  </tr>
						</tbody>
					</table>

		*/
		$('#usertablewrapper').append($('<table/>', {
			id: 'usertable',
			'class': 'table table-dark table-striped',
			append: $('<thead/>', {
                id: 'userthead',
            }), // end thead
		}));
		$('#userthead').append($('<th/>', {
			text: 'User Check 1',
		}));
		$('#userthead').append($('<th/>', {
			text: 'User Check 2',
		}));
		$('#userthead').append($('<th/>', {
			text: 'User Check 3',
		}));
    $('#usertable').append($('<tbody/>', {
			id: 'usertbody', 
		}));
		/*
			const net = new brain.recurrent.LSTMTimeStep({
			  inputSize: 2,
			  hiddenLayers: [10],
			  outputSize: 2,
			});

			net.train([
			  [1, 3],
			  [2, 2],
			  [3, 1],
			]);

			const output = net.run([
			  [1, 3],
			  [2, 2],
			]); // [3, 1]
			
			$('#wrapper').text('['+Math.round(output[0])+ ', ' + Math.round(output[0])+ ']');*/
			
			const net = new brain.recurrent.LSTMTimeStep({
			  inputSize: 3,
			  hiddenLayers: [10],
			  outputSize: 3,
			});

			// Same test as previous, but combined on a single set
			const trainingData = [
			  [
				[1, 0, 1],
				[0, 0, 1],
				[1, 1, 0],
				[0, 1, 1],
				[0, 1, 0],
				[1, 0, 0],
				[1, 1, 1],
				[0, 0, 0],
				[1, 0, 1],
				[1, 1, 0],
				[1, 0, 0],
				[0, 1, 1],
			  ],
			];

			net.train(trainingData, { log: true, errorThresh: 0.09 });

			var closeToFiveAndOne = net.run([
			  [0, 1, 1],
			  [0, 1, 0],
			  [1, 0, 0],
			]);

//			Math.round(closeToFiveAndOne[0]);

//			Math.round(closeToFiveAndOne[1]);
		
			closeToFiveAndOne = closeToFiveAndOne.map(function(each_element){
				return Number(each_element.toFixed(0));
			});
		
			// now we're cookin' with gas!
			var forecast = net.forecast(
			  [
				[1, 0, 1],
				[0, 0, 1],
			  ],
			  3
			);
				
			var x = 0;
			var lenx = forecast.length;
			while(x < lenx){
				var y = 0;
				var leny = forecast[x].length;
				while(y < leny){
					forecast[x][y] = forecast[x][y].toFixed(0);
					y++;
				}
				x++;
			}
			var output = closeToFiveAndOne+'<br><br><br>'; //+forecast;
			var x = 0;
			var lenx = forecast.length;
			while(x < lenx){
				output = output+forecast[x]+'<br>';
				x++;
			}
			$('#wrapper').html(output);
		</script>
	</body>
</html>